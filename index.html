<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>illuminate Cidadania - Login</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="box">
        <div class="form">
            <h2>Tela de Login</h2>
            <form id="formLogin">
                <div class="inputbox">
                    <input type="email" required id="loginEmail">
                    <span>E-mail</span>
                </div>
                <div class="inputbox">
                    <input type="password" required id="loginSenha">
                    <span>Senha</span>
                </div>
                <input type="submit" value="Entrar" class="sub">
                <input type="button" value="Cadastre-se" class="btn-cadastro" onclick="window.location='cadastroLogin.html';">
            </form>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCesFOOnojr0bSbJSJZld-1nk7H3Ajzp_U",
            authDomain: "projetosocial-355cb.firebaseapp.com",
            databaseURL: "https://projetosocial-355cb-default-rtdb.firebaseio.com",
            projectId: "projetosocial-355cb",
            storageBucket: "projetosocial-355cb.appspot.com",
            messagingSenderId: "583128867665",
            appId: "1:583128867665:web:03a745b1b091fc93a3a970",
            measurementId: "G-R0QHFMMVT1"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        document.getElementById('formLogin').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginSenha').value;

            signInWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
                //alert("Login realizado com sucesso!");
                window.location = 'homeUser.html'; // Redirecionar para a página homeUser.html
            })
            .catch((error) => {
                if (error.code === "auth/user-not-found") {
                    alert("Este e-mail não está cadastrado. Por favor, faça o cadastro.");
                } else if (error.code === "auth/wrong-password") {
                    alert("Senha incorreta. Por favor, tente novamente.");
                } else {
                    alert("Falha no login. Por favor, tente novamente mais tarde.");
                }
            });
        });
    </script>
</body>
</html>
